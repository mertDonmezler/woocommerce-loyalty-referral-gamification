/**
 * WooCommerce Holo Cards - 3D Holographic Card Effect
 * Adapted from pokemon-cards-css by Simon Goellner (GPL-3.0)
 * https://github.com/simeydotme/pokemon-cards-css
 *
 * Ten effect types: holo, rainbow, cosmos, basic, galaxy, prism, neon, vintage, aurora, glitch
 */

/* ═══════════════════════════════════════
   CSS @PROPERTY DECLARATIONS
   GPU-accelerated typed custom properties
   ═══════════════════════════════════════ */
@property --pointer-x {
    syntax: '<percentage>';
    inherits: true;
    initial-value: 50%;
}

@property --pointer-y {
    syntax: '<percentage>';
    inherits: true;
    initial-value: 50%;
}

@property --pointer-from-center {
    syntax: '<number>';
    inherits: true;
    initial-value: 0;
}

@property --pointer-from-top {
    syntax: '<number>';
    inherits: true;
    initial-value: 0.5;
}

@property --pointer-from-left {
    syntax: '<number>';
    inherits: true;
    initial-value: 0.5;
}

@property --card-opacity {
    syntax: '<number>';
    inherits: true;
    initial-value: 0;
}

@property --rotate-x {
    syntax: '<angle>';
    inherits: true;
    initial-value: 0deg;
}

@property --rotate-y {
    syntax: '<angle>';
    inherits: true;
    initial-value: 0deg;
}

@property --background-x {
    syntax: '<percentage>';
    inherits: true;
    initial-value: 50%;
}

@property --background-y {
    syntax: '<percentage>';
    inherits: true;
    initial-value: 50%;
}

@property --card-scale {
    syntax: '<number>';
    inherits: true;
    initial-value: 1;
}

@property --translate-x {
    syntax: '<length>';
    inherits: true;
    initial-value: 0px;
}

@property --translate-y {
    syntax: '<length>';
    inherits: true;
    initial-value: 0px;
}

@property --pointer-angle {
    syntax: '<angle>';
    inherits: true;
    initial-value: 0deg;
}

/* ═══════════════════════════════════════
   CSS CUSTOM PROPERTIES (defaults)
   ═══════════════════════════════════════ */
:root {
    --phc-card-radius: 4.55% / 3.5%;
    --phc-card-glow: #58e0d9;
    --phc-card-edge: hsl(47, 100%, 78%);

    /* rainbow spectrum colors */
    --phc-red:    hsl(2,   100%, 73%);
    --phc-orange: hsl(33,  100%, 65%);
    --phc-yellow: hsl(53,  100%, 69%);
    --phc-green:  hsl(93,  100%, 69%);
    --phc-cyan:   hsl(176, 100%, 76%);
    --phc-blue:   hsl(228, 100%, 74%);
    --phc-violet: hsl(283, 100%, 73%);

    /* dynamic pointers - set by JS */
    --pointer-x: 50%;
    --pointer-y: 50%;
    --pointer-from-center: 0;
    --pointer-from-top: 0.5;
    --pointer-from-left: 0.5;
    --card-opacity: 0;
    --rotate-x: 0deg;
    --rotate-y: 0deg;
    --background-x: 50%;
    --background-y: 50%;
    --card-scale: 1;
    --translate-x: 0px;
    --translate-y: 0px;
    --pointer-angle: 0deg;
}

/* ═══════════════════════════════════════
   BASE CARD CONTAINER
   ═══════════════════════════════════════ */
.phc-card {
    transform: translate3d(0px, 0px, 0.01px);
    z-index: 2;
    transform-style: preserve-3d;
    display: inline-block;
    position: relative;
    contain: layout style;
    content-visibility: auto;
    contain-intrinsic-size: 300px 420px;
}

.phc-card,
.phc-card * {
    outline: 1px solid transparent;
}

/* non-interactive hover fallback */
.phc-card:not(.phc-interactive) .phc-card__translater,
.phc-card:not(.phc-interactive) .phc-card__rotator,
.phc-card:not(.phc-interactive) .phc-card__shine,
.phc-card:not(.phc-interactive) .phc-card__glare {
    transition: all 0.5s ease;
}

.phc-card:not(.phc-interactive):hover {
    --pointer-x: 50%;
    --pointer-y: 30%;
    --card-scale: 1.05;
    --card-opacity: 0.8;
    --translate-y: -5px;
    --rotate-x: 5deg;
    --rotate-y: -8deg;
    --background-x: 44%;
    --background-y: 36%;
    --pointer-from-center: 0.6;
    --pointer-from-top: 0.3;
    --pointer-from-left: 0.5;
}

.phc-card.phc-interacting {
    z-index: 120;
    will-change: transform, visibility, z-index;
}

/* ═══════════════════════════════════════
   CARD TRANSFORM LAYERS
   ═══════════════════════════════════════ */
.phc-card__translater,
.phc-card__rotator {
    display: grid;
    perspective: 600px;
    will-change: transform, box-shadow;
    transform-origin: center;
    transform-style: preserve-3d;
}

.phc-card__translater {
    width: auto;
    position: relative;
    transform: translate3d(var(--translate-x), var(--translate-y), 0.01px) scale(var(--card-scale));
}

.phc-card__rotator {
    transform: rotateY(var(--rotate-x)) rotateX(var(--rotate-y));
    transform-style: preserve-3d;
    pointer-events: auto;
    border-radius: var(--phc-card-radius);
    overflow: hidden;
}

/* ═══════════════════════════════════════
   BOX SHADOWS
   ═══════════════════════════════════════ */
.phc-card__rotator {
    transition: box-shadow 0.4s ease;
    box-shadow:
        0 0 3px -1px transparent,
        0 0 2px 1px transparent,
        0 0 5px 0px transparent,
        0px 10px 20px -5px rgba(0, 0, 0, 0.5),
        0 2px 15px -5px rgba(0, 0, 0, 0.4),
        0 0 20px 0px transparent;
}

/* Active/interacting shadow is defined in the Enhanced Box Shadows section below */

/* ═══════════════════════════════════════
   CARD CONTENTS (front image)
   ═══════════════════════════════════════ */
.phc-card__rotator > * {
    width: 100%;
    display: grid;
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    image-rendering: auto;
    transform-style: preserve-3d;
    pointer-events: none;
    overflow: hidden;
}

.phc-card__front {
    backface-visibility: hidden;
    transform: translate3d(0px, 0px, 0.01px);
    height: auto;
    width: 100%;
    display: block;
}

/* ═══════════════════════════════════════
   SHINE LAYER (holographic rainbow)
   ═══════════════════════════════════════ */
.phc-card__shine {
    display: grid;
    transform: translateZ(1px);
    overflow: hidden;
    z-index: 3;
    background: transparent;
    background-size: cover;
    background-position: center;
    filter: brightness(0.85) contrast(2.75) saturate(0.65);
    mix-blend-mode: color-dodge;
    opacity: var(--card-opacity);
    border-radius: var(--phc-card-radius);
}

/* ═══════════════════════════════════════
   GLARE LAYER (pointer light spot)
   ═══════════════════════════════════════ */
.phc-card__glare {
    transform: translateZ(1.41px);
    overflow: hidden;
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 100%, 0.8) 10%,
        hsla(0, 0%, 100%, 0.65) 20%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: var(--card-opacity);
    mix-blend-mode: overlay;
    border-radius: var(--phc-card-radius);
}

/* ═══════════════════════════════════════
   EFFECT: HOLO (regular holographic)
   ═══════════════════════════════════════ */
.phc-effect-holo .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            110deg,
            var(--phc-violet), var(--phc-blue), var(--phc-green),
            var(--phc-yellow), var(--phc-red),
            var(--phc-violet), var(--phc-blue), var(--phc-green),
            var(--phc-yellow), var(--phc-red),
            var(--phc-violet), var(--phc-blue), var(--phc-green),
            var(--phc-yellow), var(--phc-red)
        ),
        repeating-linear-gradient(
            90deg,
            #000 0px, #000 2px,
            #666 2px, #666 4px
        );
    background-position:
        calc(((50% - var(--background-x)) * 2.6) + 50%) calc(((50% - var(--background-y)) * 3.5) + 50%),
        center center;
    background-size: 400% 400%, cover;
    background-blend-mode: overlay;
    filter: brightness(1.1) contrast(1.1) saturate(1.2);
    mix-blend-mode: color-dodge;
}

.phc-effect-holo .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        repeating-linear-gradient(
            90deg,
            #000 6%, hsla(0, 0%, 70%, 1) 9%,
            #000 10.5%, hsla(0, 0%, 70%, 1) 12%,
            #000 15%, #000 42%
        ),
        repeating-linear-gradient(
            90deg,
            #000 6%, hsla(0, 0%, 70%, 1) 9%,
            #000 10.5%, hsla(0, 0%, 70%, 1) 12%,
            #000 15%, #000 30%
        );
    background-position:
        calc((((50% - var(--background-x)) * 1.65) + 50%) + (var(--background-y) * 0.5)) var(--background-x),
        calc((((50% - var(--background-x)) * -0.9) + 50%) - (var(--background-y) * 0.75)) var(--background-y);
    background-size: 200% 200%, 200% 200%;
    background-blend-mode: screen;
    filter: brightness(1.15) contrast(1.1);
    mix-blend-mode: hard-light;
}

.phc-effect-holo .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 90%, 0.8) 0%,
        hsla(0, 0%, 78%, 0.1) 25%,
        hsl(0, 0%, 0%) 90%
    );
    background-position: center center;
    background-size: cover;
    mix-blend-mode: luminosity;
    filter: brightness(0.6) contrast(4);
}

.phc-effect-holo .phc-card__glare {
    opacity: calc(var(--card-opacity) * 0.8);
    filter: brightness(0.8) contrast(1.5);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: RAINBOW
   ═══════════════════════════════════════ */
.phc-effect-rainbow .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            0deg,
            hsl(2, 100%, 73%) 1%, hsl(53, 100%, 69%) 3%,
            hsl(93, 100%, 69%) 5%, hsl(176, 100%, 76%) 7%,
            hsl(228, 100%, 74%) 9%, hsl(283, 100%, 73%) 11%,
            hsl(2, 100%, 73%) 13%
        ),
        repeating-linear-gradient(
            133deg,
            hsl(2, 100%, 73%) 1%, hsl(53, 100%, 69%) 3%,
            hsl(93, 100%, 69%) 5%, hsl(176, 100%, 76%) 7%,
            hsl(228, 100%, 74%) 9%, hsl(283, 100%, 73%) 11%,
            hsl(2, 100%, 73%) 13%
        ),
        radial-gradient(
            circle farthest-corner at var(--pointer-x) var(--pointer-y),
            hsla(0, 0%, 100%, 0.6) 0%,
            hsla(0, 0%, 100%, 0) 60%
        );
    background-position:
        calc(((50% - var(--background-x)) * 0.6) + 50%) calc(((50% - var(--background-y)) * 0.6) + 50%),
        calc(((50% - var(--background-x)) * -1.6) + 50%) calc(((50% - var(--background-y)) * -1.6) + 50%),
        center center;
    background-size: 200% 200%, 200% 200%, cover;
    background-blend-mode: color-dodge;
    filter: brightness(0.9) contrast(2.5) saturate(0.8);
    mix-blend-mode: color-dodge;
}

.phc-effect-rainbow .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 90%, 0.9) 0%,
        hsla(0, 0%, 70%, 0.15) 30%,
        hsl(0, 0%, 0%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.7) contrast(3);
}

.phc-effect-rainbow .phc-card__glare {
    opacity: calc(var(--card-opacity) * 0.7);
    filter: brightness(0.7) contrast(1.8);
}

/* ═══════════════════════════════════════
   EFFECT: COSMOS
   ═══════════════════════════════════════ */
.phc-effect-cosmos .phc-card__shine {
    background-image:
        radial-gradient(
            circle farthest-corner at var(--pointer-x) var(--pointer-y),
            hsla(283, 100%, 73%, 0.7) 0%,
            hsla(228, 100%, 74%, 0.5) 20%,
            hsla(176, 100%, 76%, 0.3) 40%,
            hsla(93, 100%, 69%, 0.1) 60%,
            transparent 80%
        ),
        radial-gradient(
            circle farthest-corner at calc(100% - var(--pointer-x)) calc(100% - var(--pointer-y)),
            hsla(53, 100%, 69%, 0.5) 0%,
            hsla(2, 100%, 73%, 0.3) 30%,
            transparent 60%
        ),
        repeating-conic-gradient(
            from calc(var(--background-x) * 3.6),
            var(--phc-violet) 0%,
            var(--phc-blue) 7%,
            var(--phc-cyan) 14%,
            var(--phc-green) 21%,
            var(--phc-yellow) 28%,
            var(--phc-orange) 35%,
            var(--phc-red) 42%,
            var(--phc-violet) 50%
        );
    background-position: center center;
    background-size: cover;
    background-blend-mode: overlay;
    filter: brightness(0.8) contrast(3) saturate(0.7);
    mix-blend-mode: color-dodge;
}

.phc-effect-cosmos .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 100%, 0.8) 0%,
        hsla(0, 0%, 80%, 0.1) 35%,
        hsl(0, 0%, 0%) 80%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.5) contrast(4);
}

.phc-effect-cosmos .phc-card__glare {
    opacity: calc(var(--card-opacity) * 0.9);
    filter: brightness(0.9) contrast(1.3);
}

/* ═══════════════════════════════════════
   EFFECT: BASIC (3D tilt only, no holo)
   ═══════════════════════════════════════ */
.phc-effect-basic .phc-card__shine {
    display: none;
}

.phc-effect-basic .phc-card__glare {
    opacity: calc(var(--card-opacity) * 0.5);
    filter: brightness(1) contrast(1);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: GALAXY (deep space nebula)
   ═══════════════════════════════════════ */
.phc-effect-galaxy .phc-card__shine {
    background-image:
        radial-gradient(
            circle farthest-corner at var(--pointer-x) var(--pointer-y),
            hsla(280, 100%, 90%, 0.7) 0%,
            hsla(260, 80%, 70%, 0.3) 15%,
            transparent 50%
        ),
        radial-gradient(
            ellipse at 20% 80%,
            hsla(320, 100%, 60%, 0.25) 0%,
            transparent 50%
        ),
        radial-gradient(
            ellipse at 80% 20%,
            hsla(210, 100%, 65%, 0.25) 0%,
            transparent 50%
        ),
        conic-gradient(
            from calc(var(--background-x) * 3.6) at 50% 50%,
            hsl(270, 80%, 20%) 0%,
            hsl(300, 70%, 35%) 10%,
            hsl(330, 60%, 25%) 20%,
            hsl(260, 90%, 40%) 30%,
            hsl(220, 80%, 30%) 40%,
            hsl(200, 70%, 25%) 50%,
            hsl(280, 85%, 35%) 60%,
            hsl(310, 75%, 30%) 70%,
            hsl(240, 80%, 25%) 80%,
            hsl(260, 70%, 35%) 90%,
            hsl(270, 80%, 20%) 100%
        );
    background-position: center center;
    background-size: cover;
    background-blend-mode: screen, screen, screen, normal;
    filter: brightness(1.1) contrast(2.2) saturate(0.9);
    mix-blend-mode: color-dodge;
}

.phc-effect-galaxy .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        radial-gradient(1px 1px at 10% 15%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1px 1px at 25% 35%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 40% 70%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 55% 20%, hsla(0, 0%, 100%, 0.6) 0%, transparent 100%),
        radial-gradient(1px 1px at 65% 55%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 80% 80%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1px 1px at 90% 40%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 15% 85%, hsla(210, 100%, 90%, 0.6) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 50% 50%, hsla(280, 100%, 90%, 0.7) 0%, transparent 100%),
        radial-gradient(1px 1px at 35% 10%, hsla(0, 0%, 100%, 0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 75% 30%, hsla(320, 80%, 90%, 0.6) 0%, transparent 100%),
        radial-gradient(1px 1px at 45% 90%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(
            circle farthest-corner at var(--pointer-x) var(--pointer-y),
            hsla(280, 80%, 85%, 0.5) 0%,
            transparent 40%
        );
    mix-blend-mode: screen;
    filter: brightness(1.5);
}

.phc-effect-galaxy .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 100%, 0.7) 0%,
        hsla(270, 50%, 50%, 0.08) 30%,
        hsl(0, 0%, 0%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.55) contrast(3.5);
}

.phc-effect-galaxy .phc-card__glare {
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(270, 60%, 90%, 0.7) 10%,
        hsla(260, 50%, 80%, 0.5) 20%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: calc(var(--card-opacity) * 0.85);
    filter: brightness(0.85) contrast(1.4);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: PRISM (prismatic light refraction)
   ═══════════════════════════════════════ */
.phc-effect-prism .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            45deg,
            hsla(0, 100%, 65%, 0.9) 0%,
            hsla(30, 100%, 60%, 0.9) 1.5%,
            hsla(60, 100%, 65%, 0.9) 3%,
            hsla(120, 100%, 55%, 0.9) 4.5%,
            hsla(180, 100%, 60%, 0.9) 6%,
            hsla(240, 100%, 65%, 0.9) 7.5%,
            hsla(300, 100%, 60%, 0.9) 9%,
            hsla(0, 100%, 65%, 0.9) 10.5%
        ),
        repeating-linear-gradient(
            135deg,
            hsla(300, 100%, 65%, 0.7) 0%,
            hsla(240, 100%, 70%, 0.7) 2%,
            hsla(180, 100%, 60%, 0.7) 4%,
            hsla(120, 100%, 65%, 0.7) 6%,
            hsla(60, 100%, 60%, 0.7) 8%,
            hsla(0, 100%, 65%, 0.7) 10%,
            hsla(300, 100%, 65%, 0.7) 12%
        ),
        repeating-linear-gradient(
            90deg,
            hsla(0, 0%, 100%, 0.1) 0%,
            hsla(0, 0%, 100%, 0.6) 0.5%,
            hsla(0, 0%, 100%, 0.1) 1%,
            transparent 1%,
            transparent 4%
        ),
        repeating-linear-gradient(
            0deg,
            hsla(0, 0%, 100%, 0.05) 0%,
            hsla(0, 0%, 100%, 0.4) 0.3%,
            hsla(0, 0%, 100%, 0.05) 0.6%,
            transparent 0.6%,
            transparent 5%
        );
    background-position:
        calc(((50% - var(--background-x)) * 3) + 50%) calc(((50% - var(--background-y)) * 3) + 50%),
        calc(((50% - var(--background-x)) * -2) + 50%) calc(((50% - var(--background-y)) * -2) + 50%),
        calc(((50% - var(--background-x)) * 4) + 50%) center,
        center calc(((50% - var(--background-y)) * 4) + 50%);
    background-size: 300% 300%, 300% 300%, 200% 100%, 100% 200%;
    background-blend-mode: screen, overlay, soft-light, soft-light;
    filter: brightness(1.2) contrast(1.8) saturate(1.5);
    mix-blend-mode: color-dodge;
}

.phc-effect-prism .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        repeating-linear-gradient(
            -45deg,
            transparent 0%,
            hsla(0, 0%, 100%, 0.8) 0.2%,
            transparent 0.4%,
            transparent 3%,
            hsla(0, 0%, 100%, 0.5) 3.2%,
            transparent 3.4%,
            transparent 7%
        ),
        repeating-linear-gradient(
            60deg,
            transparent 0%,
            hsla(0, 0%, 100%, 0.6) 0.15%,
            transparent 0.3%,
            transparent 5%,
            hsla(0, 0%, 100%, 0.4) 5.15%,
            transparent 5.3%,
            transparent 9%
        );
    background-position:
        calc(((50% - var(--background-x)) * 2.5) + 50%) calc(((50% - var(--background-y)) * 1.5) + 50%),
        calc(((50% - var(--background-x)) * -1.8) + 50%) calc(((50% - var(--background-y)) * 2.2) + 50%);
    background-size: 300% 300%, 250% 250%;
    mix-blend-mode: screen;
    filter: brightness(1.3) contrast(1.2);
}

.phc-effect-prism .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 0%, 100%, 0.9) 0%,
        hsla(0, 0%, 85%, 0.15) 20%,
        hsl(0, 0%, 0%) 80%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.65) contrast(4.5);
}

.phc-effect-prism .phc-card__glare {
    opacity: calc(var(--card-opacity) * 0.75);
    filter: brightness(0.9) contrast(2);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: NEON (cyberpunk neon glow)
   ═══════════════════════════════════════ */
.phc-effect-neon .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            90deg,
            hsla(195, 100%, 55%, 0) 0%,
            hsla(195, 100%, 65%, 0.9) 3%,
            hsla(195, 100%, 55%, 0) 6%,
            transparent 6%,
            transparent 10%,
            hsla(320, 100%, 60%, 0) 10%,
            hsla(320, 100%, 65%, 0.9) 13%,
            hsla(320, 100%, 60%, 0) 16%,
            transparent 16%,
            transparent 22%,
            hsla(145, 100%, 55%, 0) 22%,
            hsla(145, 100%, 60%, 0.9) 25%,
            hsla(145, 100%, 55%, 0) 28%,
            transparent 28%,
            transparent 33%
        ),
        repeating-linear-gradient(
            0deg,
            hsla(270, 100%, 65%, 0) 0%,
            hsla(270, 100%, 70%, 0.6) 4%,
            hsla(270, 100%, 65%, 0) 8%,
            transparent 8%,
            transparent 15%,
            hsla(50, 100%, 60%, 0) 15%,
            hsla(50, 100%, 65%, 0.5) 19%,
            hsla(50, 100%, 60%, 0) 23%,
            transparent 23%,
            transparent 33%
        ),
        linear-gradient(
            180deg,
            hsl(240, 20%, 4%) 0%,
            hsl(260, 30%, 8%) 50%,
            hsl(240, 20%, 4%) 100%
        );
    background-position:
        calc(((50% - var(--background-x)) * 3.5) + 50%) center,
        center calc(((50% - var(--background-y)) * 3.5) + 50%),
        center center;
    background-size: 400% 100%, 100% 400%, cover;
    background-blend-mode: screen, screen, normal;
    filter: brightness(1.5) contrast(1.6) saturate(1.8);
    mix-blend-mode: color-dodge;
}

.phc-effect-neon .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        radial-gradient(
            ellipse at var(--pointer-x) var(--pointer-y),
            hsla(195, 100%, 70%, 0.4) 0%,
            hsla(320, 100%, 65%, 0.2) 25%,
            transparent 60%
        ),
        repeating-linear-gradient(
            45deg,
            transparent 0%,
            hsla(195, 100%, 70%, 0.15) 0.5%,
            transparent 1%,
            transparent 8%,
            hsla(320, 100%, 65%, 0.1) 8.5%,
            transparent 9%,
            transparent 16%
        );
    background-position:
        center center,
        calc(((50% - var(--background-x)) * 2) + 50%) calc(((50% - var(--background-y)) * 2) + 50%);
    background-size: cover, 300% 300%;
    mix-blend-mode: screen;
    filter: brightness(1.4) contrast(1.1);
}

.phc-effect-neon .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(195, 80%, 90%, 0.85) 0%,
        hsla(270, 50%, 50%, 0.1) 25%,
        hsl(240, 20%, 2%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.5) contrast(4);
}

.phc-effect-neon .phc-card__glare {
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(195, 100%, 80%, 0.7) 5%,
        hsla(320, 80%, 70%, 0.5) 15%,
        hsla(145, 60%, 60%, 0.3) 30%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: calc(var(--card-opacity) * 0.9);
    filter: brightness(0.85) contrast(1.6);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: VINTAGE (sepia-gold holographic)
   ═══════════════════════════════════════ */
.phc-effect-vintage .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            110deg,
            hsl(38, 90%, 60%) 0%,
            hsl(45, 85%, 70%) 4%,
            hsl(30, 80%, 50%) 8%,
            hsl(25, 70%, 40%) 12%,
            hsl(38, 90%, 60%) 16%,
            hsl(45, 85%, 70%) 20%,
            hsl(30, 80%, 50%) 24%,
            hsl(25, 70%, 40%) 28%,
            hsl(38, 90%, 60%) 32%
        ),
        repeating-linear-gradient(
            0deg,
            hsla(0, 0%, 0%, 0.08) 0px,
            hsla(0, 0%, 0%, 0.08) 1px,
            transparent 1px,
            transparent 3px
        );
    background-position:
        calc(((50% - var(--background-x)) * 2.2) + 50%) calc(((50% - var(--background-y)) * 2.8) + 50%),
        center center;
    background-size: 400% 400%, 4px 4px;
    background-blend-mode: overlay;
    filter: sepia(0.3) brightness(1.1) contrast(2.2) saturate(0.8);
    mix-blend-mode: color-dodge;
}

.phc-effect-vintage .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        repeating-linear-gradient(
            -30deg,
            transparent 0%,
            hsla(30, 50%, 40%, 0.15) 2%,
            transparent 4%,
            transparent 8%,
            hsla(40, 40%, 30%, 0.1) 10%,
            transparent 12%,
            transparent 18%
        ),
        radial-gradient(
            ellipse at 30% 70%,
            hsla(35, 60%, 25%, 0.3) 0%,
            transparent 60%
        ),
        radial-gradient(
            ellipse at 70% 30%,
            hsla(45, 50%, 30%, 0.2) 0%,
            transparent 50%
        );
    background-position:
        calc(((50% - var(--background-x)) * 1.5) + 50%) calc(((50% - var(--background-y)) * 1.5) + 50%),
        center center,
        center center;
    background-size: 300% 300%, cover, cover;
    mix-blend-mode: multiply;
    filter: brightness(1.2) contrast(1.3);
}

.phc-effect-vintage .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(40, 60%, 85%, 0.8) 0%,
        hsla(35, 40%, 60%, 0.1) 30%,
        hsl(30, 20%, 5%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.6) contrast(3.5);
}

.phc-effect-vintage .phc-card__glare {
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(38, 80%, 80%, 0.7) 10%,
        hsla(45, 60%, 65%, 0.4) 25%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: calc(var(--card-opacity) * 0.8);
    filter: brightness(0.9) contrast(1.4);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: AURORA (northern lights)
   ═══════════════════════════════════════ */
.phc-effect-aurora .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            165deg,
            hsl(120, 80%, 50%) 0%,
            hsl(160, 90%, 55%) 5%,
            hsl(200, 80%, 50%) 10%,
            hsl(280, 70%, 55%) 15%,
            hsl(160, 90%, 55%) 20%,
            hsl(120, 80%, 50%) 25%,
            hsl(200, 80%, 50%) 30%,
            hsl(280, 70%, 55%) 35%,
            hsl(120, 80%, 50%) 40%
        ),
        conic-gradient(
            from 180deg at 50% 50%,
            hsla(120, 60%, 45%, 0.5) 0%,
            hsla(160, 70%, 50%, 0.4) 15%,
            hsla(200, 60%, 50%, 0.3) 30%,
            hsla(280, 50%, 50%, 0.4) 45%,
            hsla(160, 70%, 45%, 0.5) 60%,
            hsla(120, 60%, 50%, 0.3) 75%,
            hsla(200, 60%, 45%, 0.4) 90%,
            hsla(120, 60%, 45%, 0.5) 100%
        );
    background-position:
        calc(((50% - var(--background-x)) * 3) + 50%) calc(((50% - var(--background-y)) * 3) + 50%),
        center center;
    background-size: 400% 400%, cover;
    background-blend-mode: screen;
    filter: brightness(0.9) contrast(2.5) saturate(1.1);
    mix-blend-mode: color-dodge;
}

.phc-effect-aurora .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        repeating-linear-gradient(
            0deg,
            hsla(120, 80%, 55%, 0) 0%,
            hsla(120, 80%, 60%, 0.4) 3%,
            hsla(120, 80%, 55%, 0) 6%,
            transparent 6%,
            transparent 12%,
            hsla(160, 90%, 55%, 0) 12%,
            hsla(160, 90%, 60%, 0.35) 15%,
            hsla(160, 90%, 55%, 0) 18%,
            transparent 18%,
            transparent 25%,
            hsla(280, 70%, 55%, 0) 25%,
            hsla(280, 70%, 60%, 0.3) 28%,
            hsla(280, 70%, 55%, 0) 31%,
            transparent 31%,
            transparent 40%
        );
    background-position:
        calc(((50% - var(--background-x)) * 3) + 50%) center;
    background-size: 500% 100%;
    mix-blend-mode: screen;
    filter: brightness(1.3) contrast(1.2);
}

.phc-effect-aurora .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(150, 70%, 85%, 0.8) 0%,
        hsla(160, 50%, 60%, 0.1) 30%,
        hsl(200, 30%, 5%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.55) contrast(4);
}

.phc-effect-aurora .phc-card__glare {
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(160, 90%, 75%, 0.7) 10%,
        hsla(120, 70%, 65%, 0.4) 25%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: calc(var(--card-opacity) * 0.85);
    filter: brightness(0.85) contrast(1.5);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   EFFECT: GLITCH (digital holographic distortion)
   ═══════════════════════════════════════ */
.phc-effect-glitch .phc-card__shine {
    background-image:
        repeating-linear-gradient(
            0deg,
            hsla(0, 0%, 100%, 0.06) 0px,
            hsla(0, 0%, 100%, 0.06) 1px,
            transparent 1px,
            transparent 2px
        ),
        repeating-linear-gradient(
            90deg,
            hsl(185, 100%, 55%) 0%,
            hsl(185, 100%, 55%) 8%,
            hsl(315, 100%, 55%) 8%,
            hsl(315, 100%, 55%) 16%,
            hsl(55, 100%, 55%) 16%,
            hsl(55, 100%, 55%) 24%,
            hsl(185, 100%, 55%) 24%,
            hsl(185, 100%, 55%) 32%,
            hsl(315, 100%, 55%) 32%,
            hsl(315, 100%, 55%) 40%,
            hsl(55, 100%, 55%) 40%,
            hsl(55, 100%, 55%) 50%
        );
    background-position:
        center center,
        calc(((50% - var(--background-x)) * 3.5) + 50%) calc(((50% - var(--background-y)) * 2) + 50%);
    background-size: 2px 2px, 500% 500%;
    background-blend-mode: overlay;
    background-color: hsl(0, 0%, 5%);
    filter: brightness(1.3) contrast(2) saturate(1.5);
    mix-blend-mode: color-dodge;
}

.phc-effect-glitch .phc-card__shine::before {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background-image:
        linear-gradient(
            90deg,
            hsla(0, 100%, 50%, 0.3) 0%,
            transparent 33%,
            transparent 66%,
            hsla(0, 100%, 50%, 0.15) 100%
        ),
        linear-gradient(
            90deg,
            hsla(240, 100%, 50%, 0.15) 0%,
            transparent 33%,
            transparent 66%,
            hsla(240, 100%, 50%, 0.3) 100%
        ),
        repeating-linear-gradient(
            0deg,
            transparent 0px,
            transparent 3px,
            hsla(0, 0%, 100%, 0.04) 3px,
            hsla(0, 0%, 100%, 0.04) 4px
        );
    background-position:
        calc(var(--pointer-x) + 3px) center,
        calc(var(--pointer-x) - 3px) center,
        center center;
    background-size: 100% 100%, 100% 100%, 4px 4px;
    mix-blend-mode: screen;
    filter: brightness(1.5) contrast(1.2);
}

.phc-effect-glitch .phc-card__shine::after {
    content: "";
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    background: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(185, 80%, 85%, 0.8) 0%,
        hsla(315, 50%, 50%, 0.1) 25%,
        hsl(0, 0%, 2%) 85%
    );
    mix-blend-mode: luminosity;
    filter: brightness(0.5) contrast(4.5);
}

.phc-effect-glitch .phc-card__glare {
    background-image: radial-gradient(
        circle farthest-corner at var(--pointer-x) var(--pointer-y),
        hsla(0, 100%, 70%, 0.5) 5%,
        hsla(120, 100%, 70%, 0.4) 15%,
        hsla(240, 100%, 70%, 0.3) 30%,
        hsla(0, 0%, 0%, 0.5) 90%
    );
    opacity: calc(var(--card-opacity) * 0.9);
    filter: brightness(0.9) contrast(1.8);
    mix-blend-mode: overlay;
}

/* ═══════════════════════════════════════
   SHIMMER KEYFRAME ANIMATION
   Subtle alive movement on active cards
   ═══════════════════════════════════════ */
@keyframes phc-shimmer {
    0% {
        background-position:
            calc(((50% - var(--background-x)) * 2.6) + 50% + 0%) calc(((50% - var(--background-y)) * 3.5) + 50% + 0%),
            center center;
    }
    25% {
        background-position:
            calc(((50% - var(--background-x)) * 2.6) + 50% + 2%) calc(((50% - var(--background-y)) * 3.5) + 50% - 1%),
            center center;
    }
    50% {
        background-position:
            calc(((50% - var(--background-x)) * 2.6) + 50% + 1%) calc(((50% - var(--background-y)) * 3.5) + 50% + 2%),
            center center;
    }
    75% {
        background-position:
            calc(((50% - var(--background-x)) * 2.6) + 50% - 1%) calc(((50% - var(--background-y)) * 3.5) + 50% + 1%),
            center center;
    }
    100% {
        background-position:
            calc(((50% - var(--background-x)) * 2.6) + 50% - 2%) calc(((50% - var(--background-y)) * 3.5) + 50% - 2%),
            center center;
    }
}

.phc-card.phc-active .phc-card__shine {
    animation: phc-shimmer 8s ease-in-out infinite alternate;
}

/* ═══════════════════════════════════════
   SPARKLE PSEUDO-ELEMENT
   Glitter overlay on active rotator
   ═══════════════════════════════════════ */
.phc-card__rotator::after {
    content: "";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    grid-area: 1/1;
    border-radius: var(--phc-card-radius);
    z-index: 4;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
    mix-blend-mode: overlay;
    background-image:
        radial-gradient(1px 1px at 12% 8%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 28% 22%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1.2px 1.2px at 42% 5%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 58% 32%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 73% 12%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1.3px 1.3px at 88% 28%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1px 1px at 8% 45%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1.1px 1.1px at 22% 58%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 38% 72%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1px 1px at 52% 48%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1.2px 1.2px at 68% 65%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 82% 52%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 95% 42%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1.1px 1.1px at 15% 78%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1px 1px at 32% 88%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1.3px 1.3px at 48% 95%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 65% 82%, hsla(0, 0%, 100%, 0.7) 0%, transparent 100%),
        radial-gradient(1px 1px at 78% 92%, hsla(0, 0%, 100%, 0.9) 0%, transparent 100%),
        radial-gradient(1.2px 1.2px at 92% 75%, hsla(0, 0%, 100%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 5% 62%, hsla(0, 0%, 100%, 1) 0%, transparent 100%),
        radial-gradient(1px 1px at 18% 35%, hsla(200, 80%, 90%, 0.9) 0%, transparent 100%),
        radial-gradient(1.1px 1.1px at 55% 15%, hsla(280, 80%, 90%, 0.8) 0%, transparent 100%),
        radial-gradient(1px 1px at 85% 68%, hsla(340, 80%, 90%, 0.9) 0%, transparent 100%),
        radial-gradient(1px 1px at 45% 55%, hsla(160, 80%, 90%, 0.7) 0%, transparent 100%);
}

.phc-card.phc-active .phc-card__rotator::after,
.phc-card.phc-interacting .phc-card__rotator::after {
    opacity: 0.15;
}

/* Disable sparkle on basic effect */
.phc-effect-basic .phc-card__rotator::after {
    display: none;
}

/* ═══════════════════════════════════════
   SCREEN READER ONLY (accessibility)
   ═══════════════════════════════════════ */
.phc-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* ═══════════════════════════════════════
   FOCUS INDICATORS (accessibility)
   ═══════════════════════════════════════ */
.phc-card:focus-visible {
    outline: 3px solid var(--phc-card-glow, #58e0d9);
    outline-offset: 4px;
}

.phc-card:focus-visible .phc-card__rotator {
    box-shadow:
        0 0 3px -1px white,
        0 0 3px 1px var(--phc-card-edge),
        0 0 12px 2px var(--phc-card-glow),
        0 0 24px 4px rgba(88, 224, 217, 0.25),
        0px 10px 20px -5px rgba(0, 0, 0, 0.5),
        0 2px 15px -5px rgba(0, 0, 0, 0.4),
        0 0 40px -10px var(--phc-card-glow),
        0 0 60px -15px var(--phc-card-glow),
        0 0 90px -25px var(--phc-card-glow);
}

/* Lightbox focus styles */
.phc-lightbox-close:focus-visible,
.phc-lightbox-nav:focus-visible {
    outline: 3px solid #58e0d9;
    outline-offset: 2px;
    border-radius: 4px;
}

/* ═══════════════════════════════════════
   BACK-FACE CSS (card flip support)
   ═══════════════════════════════════════ */
.phc-card__back {
    backface-visibility: hidden;
    transform: rotateY(180deg) translateZ(0.01px);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: var(--phc-card-radius);
    overflow: hidden;
    display: none;
}

.phc-card[data-phc-back] .phc-card__back {
    display: block;
}

.phc-card.phc-flipped .phc-card__rotator {
    transform: rotateY(calc(var(--rotate-x) + 180deg)) rotateX(var(--rotate-y));
}

/* ═══════════════════════════════════════
   ENHANCED BOX SHADOWS (active glow)
   Dramatic color-matched pulse
   ═══════════════════════════════════════ */
.phc-card.phc-active .phc-card__rotator,
.phc-card.phc-interacting .phc-card__rotator {
    box-shadow:
        0 0 3px -1px white,
        0 0 3px 1px var(--phc-card-edge),
        0 0 12px 2px var(--phc-card-glow),
        0 0 24px 4px rgba(88, 224, 217, 0.25),
        0px 10px 20px -5px rgba(0, 0, 0, 0.5),
        0 2px 15px -5px rgba(0, 0, 0, 0.4),
        0 0 40px -10px var(--phc-card-glow),
        0 0 60px -15px var(--phc-card-glow),
        0 0 90px -25px var(--phc-card-glow);
}

/* ═══════════════════════════════════════
   SMOOTH EDGE HIGHLIGHT on rotator
   ═══════════════════════════════════════ */
.phc-card__rotator {
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: box-shadow 0.4s ease, border-color 0.4s ease;
}

.phc-card.phc-active .phc-card__rotator,
.phc-card.phc-interacting .phc-card__rotator {
    border-color: rgba(255, 255, 255, 0.3);
}

/* ═══════════════════════════════════════
   WOOCOMMERCE OVERRIDES
   ═══════════════════════════════════════ */
.phc-woo-gallery {
    width: 100%;
    max-width: 100%;
}

.phc-woo-gallery .phc-card__front {
    width: 100%;
    height: auto;
}

.phc-woo-archive {
    width: 100%;
}

.phc-woo-archive .phc-card__front,
.phc-woo-archive img {
    width: 100%;
    height: auto;
}

/* override WooCommerce gallery defaults */
.woocommerce div.product div.images .phc-card {
    width: 100%;
}

.woocommerce div.product div.images .phc-card__rotator {
    overflow: visible;
}

/* ═══════════════════════════════════════
   ADD-TO-CART OVERLAY (archive cards)
   ═══════════════════════════════════════ */
.phc-woo-archive .phc-card__rotator {
    position: relative;
}

.phc-atc-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px 10px;
    background: linear-gradient(0deg, rgba(0,0,0,0.75) 0%, rgba(0,0,0,0.4) 70%, transparent 100%);
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.25s ease, transform 0.25s ease;
    pointer-events: none;
    z-index: 10;
    border-radius: 0 0 inherit inherit;
}

.phc-woo-archive:hover .phc-atc-overlay,
.phc-woo-archive:focus-within .phc-atc-overlay {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.phc-atc-price {
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

.phc-atc-price del {
    opacity: 0.6;
}

.phc-atc-price ins {
    text-decoration: none;
}

.phc-atc-btn {
    display: inline-block;
    padding: 6px 16px;
    font-size: 12px;
    font-weight: 600;
    color: #fff !important;
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.4);
    border-radius: 4px;
    text-decoration: none;
    cursor: pointer;
    transition: background 0.2s ease;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.phc-atc-btn:hover,
.phc-atc-btn:focus-visible {
    background: rgba(255,255,255,0.35);
    color: #fff !important;
}

.phc-atc-btn.added::after {
    content: ' \2713';
}

/* ═══════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════ */
@media screen and (max-width: 1024px) {
    .phc-card__shine {
        background-size: 500% 500%, cover;
    }
    .phc-card {
        contain-intrinsic-size: 250px 350px;
    }
}

@media screen and (max-width: 768px) {
    .phc-effect-holo .phc-card__shine {
        background-size: 600% 600%, cover;
    }
}

@media screen and (max-width: 360px) {
    .phc-card__shine {
        background-size: 700% 700%, cover;
    }
    .phc-card {
        contain-intrinsic-size: 180px 252px;
    }
    .phc-card__glare {
        opacity: calc(var(--card-opacity) * 0.5);
    }
}

/* ═══════════════════════════════════════
   HIGH CONTRAST
   ═══════════════════════════════════════ */
@media (prefers-contrast: more) {
    .phc-card__rotator {
        border: 2px solid rgba(255, 255, 255, 0.5);
    }
    .phc-card__shine {
        filter: brightness(1.2) contrast(3) saturate(0.9);
    }
    .phc-card:focus-visible {
        outline-width: 4px;
    }
}

/* ═══════════════════════════════════════
   REDUCED MOTION
   ═══════════════════════════════════════ */
@media (prefers-reduced-motion: reduce) {
    .phc-card,
    .phc-card__translater,
    .phc-card__rotator,
    .phc-card__shine,
    .phc-card__glare,
    .phc-card__back,
    .phc-lightbox-overlay,
    .phc-lightbox-content {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
    }
    /* Disable 3D transforms entirely */
    .phc-card__rotator {
        transform: none !important;
    }
    .phc-card__shine {
        opacity: 0.3 !important;
    }
    .phc-card__glare {
        opacity: 0.2 !important;
    }
    /* Disable sparkle canvas */
    .phc-card__sparkle {
        display: none !important;
    }
    /* Show card flat without hover effects */
    .phc-card:hover {
        transform: none !important;
    }
}

/* ═══════════════════════════════════════
   FORCED COLORS (Windows High Contrast)
   ═══════════════════════════════════════ */
@media (forced-colors: active) {
    .phc-card__shine,
    .phc-card__glare,
    .phc-card__rotator::after {
        display: none !important;
    }
    .phc-card__rotator {
        border: 2px solid ButtonText;
        box-shadow: none !important;
    }
    .phc-card:focus-visible {
        outline: 3px solid Highlight;
        outline-offset: 4px;
    }
    .phc-lightbox-close,
    .phc-lightbox-nav,
    .phc-carousel-arrow {
        border: 2px solid ButtonText;
        background: Canvas;
        color: ButtonText;
    }
    .phc-lightbox-close:focus-visible,
    .phc-lightbox-nav:focus-visible,
    .phc-carousel-arrow:focus-visible {
        outline: 3px solid Highlight;
    }
    .phc-carousel-dot {
        border-color: ButtonText;
    }
    .phc-carousel-dot-active {
        background: Highlight;
        border-color: Highlight;
    }
    .phc-atc-btn {
        border: 2px solid ButtonText;
        color: ButtonText !important;
        background: Canvas;
    }
}

/* ═══════════════════════════════════════
   DARK MODE SUPPORT
   ═══════════════════════════════════════ */
@media (prefers-color-scheme: dark) {
    :root {
        --phc-card-edge: hsl(47, 80%, 65%);
    }
    .phc-card__rotator {
        border-color: rgba(255, 255, 255, 0.15);
    }
    .phc-card.phc-active .phc-card__rotator,
    .phc-card.phc-interacting .phc-card__rotator {
        border-color: rgba(255, 255, 255, 0.4);
    }
    .phc-card__shine {
        filter: brightness(0.95) contrast(2.85) saturate(0.7);
    }
}

/* ═══════════════════════════════════════
   CAROUSEL
   ═══════════════════════════════════════ */
.phc-carousel {
    position: relative;
    overflow: hidden;
    width: 100%;
    margin: 20px 0;
}

.phc-carousel-track {
    display: flex;
    transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.phc-carousel-slide {
    flex: 0 0 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
}

.phc-carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    width: 44px;
    height: 44px;
    border: none;
    background: rgba(0, 0, 0, 0.3);
    color: #fff;
    font-size: 28px;
    line-height: 44px;
    text-align: center;
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
    backdrop-filter: blur(4px);
}
.phc-carousel-prev { left: 10px; }
.phc-carousel-next { right: 10px; }
.phc-carousel-arrow:hover {
    background: rgba(0, 0, 0, 0.6);
    transform: translateY(-50%) scale(1.1);
}
.phc-carousel-arrow:focus-visible {
    outline: 3px solid #58e0d9;
    outline-offset: 2px;
}

.phc-carousel-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    padding: 12px 0;
}

.phc-carousel-dot {
    width: 10px;
    height: 10px;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    background: transparent;
    cursor: pointer;
    padding: 0;
    transition: background 0.2s, border-color 0.2s;
}
.phc-carousel-dot:hover {
    border-color: rgba(255, 255, 255, 0.8);
}
.phc-carousel-dot-active {
    background: #58e0d9;
    border-color: #58e0d9;
}
.phc-carousel-dot:focus-visible {
    outline: 2px solid #58e0d9;
    outline-offset: 2px;
}

/* Dark background for carousel to show holo effects better */
.phc-carousel {
    background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    border-radius: 16px;
}

@media (max-width: 640px) {
    .phc-carousel-arrow {
        width: 36px;
        height: 36px;
        font-size: 22px;
        line-height: 36px;
    }
    .phc-carousel-prev { left: 4px; }
    .phc-carousel-next { right: 4px; }
}

/* ═══════════════════════════════════════
   LIGHTBOX OVERLAY
   ═══════════════════════════════════════ */
.phc-lightbox-overlay {
    position: fixed;
    inset: 0;
    z-index: 999999;
    background: rgba(0, 0, 0, 0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    cursor: zoom-out;
}
.phc-lightbox-overlay.phc-lightbox-active {
    opacity: 1;
}

.phc-lightbox-content {
    position: relative;
    max-width: 90vw;
    max-height: 85vh;
    cursor: default;
    transform: scale(0.85);
    transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.phc-lightbox-active .phc-lightbox-content {
    transform: scale(1);
}

.phc-lightbox-content .phc-card {
    width: min(500px, 80vw);
    margin: 0 auto;
}

.phc-lightbox-close {
    position: absolute;
    top: -40px;
    right: -10px;
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
    font-size: 22px;
    line-height: 36px;
    text-align: center;
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
    z-index: 10;
}
.phc-lightbox-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.15);
}

.phc-lightbox-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    border: none;
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
    font-size: 24px;
    line-height: 44px;
    text-align: center;
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
    z-index: 10;
}
.phc-lightbox-nav:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-50%) scale(1.1);
}
.phc-lightbox-prev { left: -60px; }
.phc-lightbox-next { right: -60px; }

.phc-lightbox-counter {
    position: absolute;
    bottom: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: rgba(255, 255, 255, 0.6);
    font-size: 13px;
    white-space: nowrap;
}

/* Zoom on scroll/pinch */
.phc-lightbox-content.phc-lightbox-zoomed {
    transform: scale(1.5);
    cursor: grab;
}
.phc-lightbox-content.phc-lightbox-zoomed:active {
    cursor: grabbing;
}

/* Gallery mobile swipe */
@media (max-width: 640px) {
    .phc-gallery {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        gap: 16px;
        padding: 10px 5px;
        scrollbar-width: none; /* Firefox */
    }
    .phc-gallery::-webkit-scrollbar {
        display: none; /* Chrome/Safari */
    }
    .phc-gallery > .phc-card {
        flex: 0 0 auto;
        scroll-snap-align: center;
    }
}

/* Lightbox zoom transition */
.phc-lightbox-content {
    transition: transform 0.3s ease;
}

@media (max-width: 640px) {
    .phc-lightbox-content .phc-card {
        width: min(320px, 85vw);
    }
    .phc-lightbox-prev { left: 5px; }
    .phc-lightbox-next { right: 5px; }
    .phc-lightbox-close { top: -35px; right: 0; }
}
